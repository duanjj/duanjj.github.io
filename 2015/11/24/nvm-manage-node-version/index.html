<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Jason"><meta name="description" content="MacOSX使用brew安裝NVM1$brewinstallnvm安装成功后，将下面指令加入到.bash_profile（或.bashrc）我用的是.zshrc文件中12exportNVM_DIR=~/.nvmsource$(brew--prefi"><meta name="keywords" content=""><title>nvm管理多版本Node.js · Jason</title><link rel="icon" href="/favicon.ico"><link rel="canonical" href="http://jasder.github.io/2015/11/24/nvm-manage-node-version/"><link rel="alternate" href="/atom.xml" title="Jason"><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><link rel="stylesheet" href="/css/style.css"><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?Your baidu Analytics ID";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'Your Google Analytics ID', 'auto');
ga('send', 'pageview');</script></head><body><div id="main"><header><a href="/." class="logo">Jason</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li><li class="nav-link"><a href="/categories/" target="_self">Categories</a></li><li class="nav-link"><a href="/tags/" target="_self">Tags</a></li><li class="nav-link"><a href="/about/" target="_self">About</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">nvm管理多版本Node.js</h1><span class="post-time">Nov 24, 2015</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Contents</h3><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mac-OSX"><span class="toc-text">Mac OSX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-NVM-安裝-Node-js"><span class="toc-text">使用 NVM 安裝 Node.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置-npm-源（可选）"><span class="toc-text">配置 npm 源（可选）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-nvmrc-文件配置项目所使用的-node-版本"><span class="toc-text">使用 .nvmrc 文件配置项目所使用的 node 版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol></div><div class="post-content"><h3 id="Mac-OSX"><a href="#Mac-OSX" class="headerlink" title="Mac OSX"></a>Mac OSX</h3><ol>
<li><p>使用 brew 安裝 NVM</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install nvm</div></pre></td></tr></table></figure>
</li>
<li><p>安装成功后，将下面指令加入到.bash_profile（或 .bashrc）我用的是.zshrc文件中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export NVM_DIR=~/.nvm</div><div class="line">source $(brew --prefix nvm)/nvm.sh</div></pre></td></tr></table></figure>
</li>
<li><p>重新载入上述文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">source</span> ~/.zshrc （或者 ~/.bash_profile 或 ~/bashrc）</div></pre></td></tr></table></figure>
</li>
<li><p>检测nvm</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ nvm --version</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="使用-NVM-安裝-Node-js"><a href="#使用-NVM-安裝-Node-js" class="headerlink" title="使用 NVM 安裝 Node.js"></a>使用 NVM 安裝 Node.js</h3><p><strong>找出目前所有可安裝的 Node.js 版本</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">$ nvm ls-remote</div><div class="line"></div><div class="line">    v0.11.8</div><div class="line">    v0.11.9</div><div class="line">    v0.11.10</div><div class="line">    v0.11.11</div><div class="line">    v0.11.12</div><div class="line">    v0.11.13</div><div class="line">    v0.11.14</div><div class="line">    v0.11.15</div><div class="line">    v0.11.16</div><div class="line">    ...</div><div class="line">    v6.8.0</div><div class="line">    v6.8.1</div><div class="line">    v6.9.0   (LTS: Boron)</div><div class="line">    v6.9.1   (LTS: Boron)</div><div class="line">    v6.9.2   (Latest LTS: Boron)</div><div class="line">    v7.0.0</div><div class="line">    v7.1.0</div><div class="line">    v7.2.0</div><div class="line">    v7.2.1</div><div class="line">    v7.3.0</div></pre></td></tr></table></figure></p>
<p><strong>安裝 Node.js (v6.9.0)</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ nvm install v6.9.0</div></pre></td></tr></table></figure></p>
<p><strong>nvm指定使用Node.js版本</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ nvm use v6.9.0</div><div class="line">Now using node v6.9.0 (npm v3.10.8)</div></pre></td></tr></table></figure></p>
<p><strong>指定默认使用的版本</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ nvm <span class="built_in">alias</span> default v6.9.</div><div class="line">default -&gt; v6.9.0</div></pre></td></tr></table></figure></p>
<p><strong>列出所有安裝的版本</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ nvm ls</div><div class="line">-&gt;       v6.9.0</div><div class="line">         v6.9.2</div><div class="line">         system</div><div class="line">default -&gt; v6.9.0</div><div class="line">node -&gt; stable (-&gt; v6.9.2) (default)</div><div class="line">stable -&gt; 6.9 (-&gt; v6.9.2) (default)</div><div class="line">iojs -&gt; N/A (default)</div><div class="line">lts/* -&gt; lts/boron (-&gt; v6.9.2)</div><div class="line">lts/argon -&gt; v4.7.0 (-&gt; N/A)</div><div class="line">lts/boron -&gt; v6.9.2</div></pre></td></tr></table></figure></p>
<p><strong>測試 Node.js</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ node -v</div><div class="line">v6.9.2</div></pre></td></tr></table></figure></p>
<p><strong>測試 npm</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm -v</div><div class="line">3.10.9</div></pre></td></tr></table></figure></p>
<h3 id="配置-npm-源（可选）"><a href="#配置-npm-源（可选）" class="headerlink" title="配置 npm 源（可选）"></a>配置 npm 源（可选）</h3><p>nvm 安装 node 的同时会安装 npm。但是，国外源的速度和稳定性毕竟不让人放心。淘宝为大家提供了一个完整 npm 镜像 <a href="http://npm.taobao.org/。" target="_blank" rel="external">http://npm.taobao.org/。</a><br>我们可以使用淘宝提供的 <strong><em>cnpm</em></strong> 替代 <strong><em>npm</em></strong> 使用：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure></p>
<p>这样安装模块的时候:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cnpm install [name]</div></pre></td></tr></table></figure></p>
<p>使用的就是淘宝的源了。 它支持除了 npm publish 之外的所有命令。</p>
<h3 id="使用-nvmrc-文件配置项目所使用的-node-版本"><a href="#使用-nvmrc-文件配置项目所使用的-node-版本" class="headerlink" title="使用 .nvmrc 文件配置项目所使用的 node 版本"></a>使用 .nvmrc 文件配置项目所使用的 node 版本</h3><p>每个版本的Node都会自带一个不同版本的npm，可以用npm -v来查看npm的版本。全局安装的npm包并不会在不同的Node环境中共享，因为这会引起兼容问题。它们被放在了不同版本的目录下，例如~/.nvm/versions/node/<version>/lib/node_modules</version>这样的目录。这刚好也省去我们在Linux中使用sudo的功夫了。因为这是用户的主文件夹，并不会引起权限问题。<br>如果默认 node 版本（通过 nvm alias 命令设置的）与项目所需的版本不同，则可在项目根目录或其任意父级目录中创建 .nvmrc 文件，在文件中指定使用的 node 版本号，如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ touch .nvmrc</div><div class="line">$ <span class="built_in">echo</span> 6.9.0 &gt; .nvmrc</div></pre></td></tr></table></figure></p>
<p>进入当前项目后，运行如下命令即可切换到该项目对应的node版本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ nvm use </div><div class="line">Found <span class="string">'/Users/djs/work/jasduaner-blog/.nvmrc'</span> with version &lt;v6.9.2&gt;</div><div class="line">Now using node v6.9.2 (npm v3.10.9)</div></pre></td></tr></table></figure></p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="http://mac-osx-for-newbie-book.kejyun.com/software/softwareWebDeveloperNodeJS.html" target="_blank" rel="external">http://mac-osx-for-newbie-book.kejyun.com/software/softwareWebDeveloperNodeJS.html</a></p>
<p><a href="https://github.com/creationix/nvm" target="_blank" rel="external">https://github.com/creationix/nvm</a></p>
</div></article><div class="tags"></div><div class="paginator"><a href="/2016/05/29/visual-studio-code/" class="prev"><i class="iconfont icon-left"></i><span> Prev</span></a><a href="/2015/11/24/nvm/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div id="disqus_thread"></div></section><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'http://jasder.github.io/2015/11/24/nvm-manage-node-version/';
    this.page.identifier = '2015/11/24/nvm-manage-node-version/';
    this.page.title = 'nvm管理多版本Node.js';
};
(function() {
var d = document, s = d.createElement('script');

s.src = '//Your disqus ID.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></section><footer><div class="social"><a href="mailto:jasduaner@gmail.com" title="email" class="iconfont icon-email"></a><a href="https://github.com/jasder" title="github" class="iconfont icon-github"></a></div><div class="copyright"><p class="since">&copy;2013-2017<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Jason</span></p></div><div id="back2top"><i class="iconfont icon-up"></i></div></footer></div><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></body></html>